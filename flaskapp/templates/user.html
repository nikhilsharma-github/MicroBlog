{% extends 'base.html' %}


{% block content %}
<div class="row mb-4">
    <div class="col-md-3 text-center">
        <img src="{{ user.avatar(256) }}" class="avatar shadow mb-3" style="max-width: 100%;">
    </div>
    <div class="col-md-9">
        <h1 class="fw-bold"><span class="text-primary">{{ user.username }}</span></h1>
        {% if user.about_me %}<p class="text-black fs-5">{{ user.about_me }}</p>{% endif %}
        {% if user.last_seen %}<p class="text-black fs-5">{{ _('Last seen on') }}: {{ moment(user.last_seen).format('LLL') }}</p>{% endif %}
        <p>
            <span class="badge bg-primary">{{ _('%(count)d followers', count=user.followers_count()) }}</span>
            <span class="badge bg-secondary">{{ _('%(count)d following', count=user.following_count()) }}</span>
        </p>
        {% if user == current_user %}
            <p><a href="{{ url_for('main.edit_profile') }}" class="btn btn-outline-primary btn-sm">{{ _('Edit your profile') }}</a></p>
        {% elif not current_user.is_following(user) %}
            <form action="{{ url_for('main.follow', username=user.username) }}" method="post" class="d-inline">
                {{ form.hidden_tag() }}
                {{ form.submit(value=_('Follow'), class_='btn btn-primary btn-sm') }}
            </form>
        {% else %}
            <form action="{{ url_for('main.unfollow', username=user.username) }}" method="post" class="d-inline">
                {{ form.hidden_tag() }}
                {{ form.submit(value=_('Unfollow'), class_='btn btn-primary btn-sm') }}
            </form>
        {% endif %}
        {% if user != current_user %}
            <a href="{{ url_for('main.send_message', recipient=user.username) }}" class="btn btn-outline-info text-primary btn-sm ms-2">{{ _('Send private message') }}</a>
        {% endif %}
    </div>
</div>
{% for post in posts %}
    {% include '_post.html' %}
{% endfor %}
<nav aria-label="Post navigation">
    <ul class="pagination justify-content-center">
        <li class="page-item{% if not prev_url %} disabled{% endif %}">
            <a class="page-link" href="{{ prev_url }}">
                <span aria-hidden="true">&larr;</span> {{ _('Newer posts') }}
            </a>
        </li>
        <li class="page-item{% if not next_url %} disabled{% endif %}">
            <a class="page-link" href="{{ next_url }}">
                {{ _('Older posts') }} <span aria-hidden="true">&rarr;</span>
            </a>
        </li>
    </ul>
</nav>
{% endblock %}